!function(){"use strict";const e={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=document.querySelector("#card-template"),s=document.querySelector("#editButton"),r=document.querySelector("#editModal"),n=document.querySelector("#addButton"),i=(t.querySelector("#cardDeleteButton"),document.querySelector("#addModal")),o=document.querySelector("#viewPicModal"),a=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#name-input")),l=document.querySelector("#description-input"),c=r.querySelector(".modal__form"),d=r.querySelector(".modal__button"),h=i.querySelector(".modal__form"),u=i.querySelector(".modal__button"),_=(document.querySelector("#place-title"),document.querySelector("#image-link"),o.querySelector(".modal__image"),o.querySelector(".modal__pic-title"),document.querySelector("#avatarButton")),m=document.getElementById("profile__avatar"),p=document.querySelector("#editAvatarModal"),v=p.querySelector(".modal__form"),E=p.querySelector(".modal__button");class S{constructor(e,t,s,r,n){this._name=e.name,this._link=e.link,this._id=e._id,this.isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=r,this._handleLikeClick=n}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleLikeClick(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this)})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteClick(this)}))}handleLikeIcon(){this._cardLikeButton.classList.toggle("card__like-button_active")}_renderLikes(){this.isLiked?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__text"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._renderLikes(),this._cardElement}}class L{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}addItem=e=>{const t=this._renderer(e);this._container.prepend(t)};renderItems=()=>{this._items.reverse().forEach((e=>{this.addItem(e)}))}}var b=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputEls=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector("#"+e.id+"-error");e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector("#"+e.id+"-error");e.classList.remove(this._inputErrorClass),t.textContent=" ",t.classList.remove(this._errorClass)}_checkInputValidity(e,t){e.validity.valid?this._hideInputError(e,t):this._showInputError(e,t)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(e,t,s){this._hasInvalidInput(e)?this._disableButton(t):this._enableButton(e,t,s)}_setEventListeners(e){this._toggleButtonState(e),this._inputEls.forEach((t=>{t.addEventListener("input",(s=>{this._checkInputValidity(t,e),this._toggleButtonState(this._inputEls,this._submitButton,e)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this._disableButton(this._submitButton)}};class f{constructor(e){this._popupElement=document.querySelector(e),this._boundHandleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._boundHandleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._boundHandleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal_opened")&&this.close(),e.target.classList.contains("modal__close")&&this.close()}))}}class k extends f{constructor(e,t){super(e),this._handleFormSubmit=t,this._inputs=this._popupElement.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const C=new class{constructor(e){let{baseUrl:t,headers:s}=e;this.server=t,this.headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this.server}/cards`,{headers:this.headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this.server}/users/me`,{headers:this.headers}).then(this._checkResponse)}renderCards(){return Promise.all(this.getUserInfo(),this.getInitialCards())}updateProfileInfo(e,t){return fetch(`${this.server}/users/me`,{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}updateAvatar(e){return fetch(`${this.server}/users/me/avatar`,{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}createCards(e){return fetch(`${this.server}/cards`,{method:"POST",headers:this.headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}deleteCards(e){return fetch(`${this.server}/cards/${e}`,{method:"DELETE",headers:this.headers}).then(this._checkResponse)}putCardLike(e){return fetch(`${this.server}/cards/${e}/likes`,{method:"PUT",headers:this.headers}).then(this._checkResponse)}deleteCardLike(e){return fetch(`${this.server}/cards/${e}/likes`,{method:"DELETE",headers:this.headers}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"ae6b9f6f-b246-460f-9f1b-c55dcebd386d","Content-Type":"application/json"}}),y=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:r}=e;this.name=document.querySelector(t),this.job=document.querySelector(s),this.avatar=document.querySelector(r)}getUserInfo(){return{name:this.name.textContent,job:this.job.textContent,avatar:this.avatar.src}}setUserInfo(e,t){this.name.textContent=e,this.job.textContent=t}setAvatar(e){this.avatar.src=e}}({nameSelector:".profile__title",jobSelector:".profile__description",avatarSelector:".profile__avatar"}),q=new k("#editModal",(function(e){d.textContent="Saving...",C.updateProfileInfo(e.title,e.description).then((e=>{y.setUserInfo(e.name,e.about),q.close(),d.textContent="Save"})).catch((e=>{console.error(e)}))}));q.setEventListeners();const I=new class extends f{constructor(e){super(e)}open(e){const t=this._popupElement.querySelector(".modal__image"),s=this._popupElement.querySelector(".modal__pic-title");t.src=e._link,t.alt=e._name,s.textContent=e._name,super.open()}}("#viewPicModal");I.setEventListeners();const g=new k("#addModal",(function(e,t){u.textContent="Saving...",C.createCards(e,t).then((e=>{x.addItem(e),g.close(),h.reset(),u.textContent="Save"})).catch((e=>{console.error(e)}))}));g.setEventListeners();const B=new k("#editAvatarModal",(function(e){E.textContent="Saving...",C.updateAvatar(e.link).then((()=>{y.setAvatar(e.link),B.close(),E.textContent="Save"})).catch((e=>{console.error(e)}))}));B.setEventListeners();const w=new class extends f{constructor(e,t){super(e),this._affirmButton=this._popupElement.querySelector(".modal__button"),this._handleDeleteCard=t,this._id=null}setEventListeners(e){document.querySelector("#deleteCardModal .modal__button").addEventListener("click",(()=>this._handleDeleteCard(e))),super.setEventListeners()}open(e){this._id=e,super.open()}close(e){this._id=e,super.close()}}("#deleteCardModal",(e=>function(e){C.deleteCards(e._id).then((()=>{w.close(),e.handleDeleteCard(),window.location.reload()})).catch((e=>{console.error(e)}))}(e)));let x,V;function A(e){return V=new S(e,"#card-template",D,(e=>function(e){w.open(e),w.setEventListeners(e)}(e)),(e=>function(e){!0===e.isLiked?C.deleteCardLike(e._id).then((t=>{e.isLiked=!1,e.handleLikeIcon()})).catch((e=>{console.error(e)})):C.putCardLike(e._id).then((t=>{e.isLiked=!0,e.handleLikeIcon()})).catch((e=>{console.error(e)}))}(e))),V.getView()}function D(e){I.open(e)}C.getInitialCards().then((e=>{x=new L({items:e,renderer:A},".cards__list"),x.renderItems()})).catch((e=>{console.error(e)})),C.getUserInfo().then((e=>{y.setUserInfo(e.name,e.about),y.setAvatar(e.avatar)})).catch((e=>{console.error(e)})),document.addEventListener("DOMContentLoaded",(function(){const t=new b(e,h),r=new b(e,c),i=new b(e,v);t.enableValidation(),r.enableValidation(),i.enableValidation(),s.addEventListener("click",(()=>{const e=y.getUserInfo();a.value=e.name,l.value=e.job,q.open(),r.resetValidation()})),n.addEventListener("click",(()=>{g.open(),t.resetValidation()})),m.addEventListener("click",(()=>{B.open(),t.resetValidation()})),m.addEventListener("mousemove",(()=>{_.classList.replace("profile__avatar-button_disabled","profile__avatar-button")}))})),m.addEventListener("mouseout",(()=>{_.classList.replace("profile__avatar-button","profile__avatar-button_disabled")}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUFBLE1BQW1DMEIsRUFBUXRLLEtBQzNDNEksRUFBQUEsTUFBMEMwQixFQUFRL0IsSUFDbERHLEVBQVV0RCxPQUNWZ0YsRUFBa0J2RixpQkFBaUIsSUFHckMrRCxFQUFBQSxpQkFBcUMsU0FBUyxLQUM1Q1csRUFBVW5FLE9BQ1Y4RSxFQUFpQnJGLGlCQUFpQixJQUdwQytELEVBQUFBLGlCQUFrQyxTQUFTLEtBQ3pDYSxFQUFZckUsT0FDWjhFLEVBQWlCckYsaUJBQWlCLElBR3BDK0QsRUFBQUEsaUJBQWtDLGFBQWEsS0FDN0NBLEVBQUFBLFVBQUFBLFFBQ0Usa0NBQ0EseUJBQ0QsR0FFTCxJQUVBQSxFQUFBQSxpQkFBa0MsWUFBWSxLQUM1Q0EsRUFBQUEsVUFBQUEsUUFDRSx5QkFDQSxrQ0FDRCxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZm9ybVZhbGlkYXRpb25Db25maWcgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xuZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRCdXR0b25cIik7XG5leHBvcnQgY29uc3QgZWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0TW9kYWxcIik7XG5leHBvcnQgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRCdXR0b25cIik7XG5leHBvcnQgY29uc3QgZGVsZXRlQnV0dG9uID0gY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZERlbGV0ZUJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkTW9kYWxcIik7XG5leHBvcnQgY29uc3Qgdmlld1BpY01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN2aWV3UGljTW9kYWxcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1pbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb24taW5wdXRcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVTdWJtaXRCdXR0b24gPVxuICBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gYWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkU3VibWl0QnV0dG9uID0gYWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGFjZS10aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkTGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1saW5rXCIpO1xuZXhwb3J0IGNvbnN0IHZpZXdQaWNNb2RhbEltYWdlID0gdmlld1BpY01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IHZpZXdQaWNNb2RhbFRpdGxlID1cbiAgdmlld1BpY01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3BpYy10aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhckJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhdmF0YXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGVfX2F2YXRhclwiKTtcbmV4cG9ydCBjb25zdCBlZGl0QXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRBdmF0YXJNb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBlZGl0QXZhdGFyRm9ybSA9IGVkaXRBdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhclN1Ym1pdEJ1dHRvbiA9XG4gIGVkaXRBdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZGF0YSxcbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVDbGljayxcbiAgICBoYW5kbGVMaWtlQ2xpY2tcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5pc0xpa2VkID0gZGF0YS5pc0xpa2VkO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9yZW5kZXJMaWtlcygpIHtcbiAgICBpZiAodGhpcy5pc0xpa2VkKSB7XG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIik7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPVxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICBhZGRJdGVtID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoZGF0YSk7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH07XG5cbiAgcmVuZGVySXRlbXMgPSAoKSA9PiB7XG4gICAgdGhpcy5faXRlbXMucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuYWRkSXRlbShpdGVtKTtcbiAgICB9KTtcbiAgfTtcbn1cbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWw7XG4gICAgdGhpcy5faW5wdXRFbHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIjXCIgKyBpbnB1dEVsLmlkICsgXCItZXJyb3JcIlxuICAgICk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiI1wiICsgaW5wdXRFbC5pZCArIFwiLWVycm9yXCJcbiAgICApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCIgXCI7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCwgb3B0aW9ucykge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRFbHMsIHN1Ym1pdEJ1dHRvbiwgb3B0aW9ucykge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRFbHMpKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKHN1Ym1pdEJ1dHRvbik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2VuYWJsZUJ1dHRvbihpbnB1dEVscywgc3VibWl0QnV0dG9uLCBvcHRpb25zKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycyhvcHRpb25zKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUob3B0aW9ucyk7XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dEVscywgdGhpcy5fc3VibWl0QnV0dG9uLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9KTtcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKHRoaXMuX3N1Ym1pdEJ1dHRvbik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2JvdW5kSGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9ib3VuZEhhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2JvdW5kSGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dE9iaiA9IHt9O1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXRPYmpbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRPYmo7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJpbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0ICogYXMgY29uc3RhbnRzIGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qc1wiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJhZTZiOWY2Zi1iMjQ2LTQ2MGYtOWYxYi1jNTVkY2ViZDM4NmRcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5jb25zdCB1c2VJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbiAgYXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxufSk7XG5cbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2VkaXRNb2RhbFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5lZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgbmV3UG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiN2aWV3UGljTW9kYWxcIik7XG5uZXdQb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2FkZE1vZGFsXCIsIGhhbmRsZUNhcmRGb3JtU3VibWl0KTtcbmNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNlZGl0QXZhdGFyTW9kYWxcIixcbiAgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdFxuKTtcbmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwQWZmaXJtID0gbmV3IFBvcHVwV2l0aENvbmZpcm0oXCIjZGVsZXRlQ2FyZE1vZGFsXCIsIChjYXJkKSA9PlxuICBoYW5kbGVEZWxldGVDYXJkKGNhcmQpXG4pO1xuXG5sZXQgbmV3Q2FyZExpc3Q7XG5sZXQgY2FyZDtcblxuYXBpXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxuICAudGhlbigocmVzKSA9PiB7XG4gICAgbmV3Q2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAgICAgIHsgaXRlbXM6IHJlcywgcmVuZGVyZXI6IGNyZWF0ZUNhcmQgfSxcbiAgICAgIFwiLmNhcmRzX19saXN0XCJcbiAgICApO1xuICAgIG5ld0NhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxuYXBpXG4gIC5nZXRVc2VySW5mbygpXG4gIC50aGVuKChyZXMpID0+IHtcbiAgICB1c2VJbmZvLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQpO1xuICAgIHVzZUluZm8uc2V0QXZhdGFyKHJlcy5hdmF0YXIpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfSk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIGNvbnN0YW50cy5mb3JtVmFsaWRhdGlvbkNvbmZpZyxcbiAgICBjb25zdGFudHMuYWRkQ2FyZEZvcm1cbiAgKTtcblxuICBjb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIGNvbnN0YW50cy5mb3JtVmFsaWRhdGlvbkNvbmZpZyxcbiAgICBjb25zdGFudHMucHJvZmlsZUVkaXRGb3JtXG4gICk7XG5cbiAgY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIGNvbnN0YW50cy5mb3JtVmFsaWRhdGlvbkNvbmZpZyxcbiAgICBjb25zdGFudHMuZWRpdEF2YXRhckZvcm1cbiAgKTtcblxuICBhZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBhdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBMaXN0ZW5lcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIGNvbnN0YW50cy5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc3QgZ2V0VXNlciA9IHVzZUluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBjb25zdGFudHMucHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IGdldFVzZXIubmFtZTtcbiAgICBjb25zdGFudHMucHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBnZXRVc2VyLmpvYjtcbiAgICBlZGl0UG9wdXAub3BlbigpO1xuICAgIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICB9KTtcblxuICBjb25zdGFudHMuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZFBvcHVwLm9wZW4oKTtcbiAgICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICB9KTtcblxuICBjb25zdGFudHMuYXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgYXZhdGFyUG9wdXAub3BlbigpO1xuICAgIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIH0pO1xuXG4gIGNvbnN0YW50cy5hdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCAoKSA9PiB7XG4gICAgY29uc3RhbnRzLmF2YXRhckJ1dHRvbi5jbGFzc0xpc3QucmVwbGFjZShcbiAgICAgIFwicHJvZmlsZV9fYXZhdGFyLWJ1dHRvbl9kaXNhYmxlZFwiLFxuICAgICAgXCJwcm9maWxlX19hdmF0YXItYnV0dG9uXCJcbiAgICApO1xuICB9KTtcbn0pO1xuXG5jb25zdGFudHMuYXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gIGNvbnN0YW50cy5hdmF0YXJCdXR0b24uY2xhc3NMaXN0LnJlcGxhY2UoXG4gICAgXCJwcm9maWxlX19hdmF0YXItYnV0dG9uXCIsXG4gICAgXCJwcm9maWxlX19hdmF0YXItYnV0dG9uX2Rpc2FibGVkXCJcbiAgKTtcbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNhcmQgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICAoaWQpID0+IGhhbmRsZURlbGV0ZUNsaWNrKGlkKSxcbiAgICAoaWQpID0+IGhhbmRsZUxpa2VDbGljayhpZClcbiAgKTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmREYXRhKSB7XG4gIG5ld1BvcHVwSW1hZ2Uub3BlbihjYXJkRGF0YSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNsaWNrKGNhcmQpIHtcbiAgcG9wdXBBZmZpcm0ub3BlbihjYXJkKTtcbiAgcG9wdXBBZmZpcm0uc2V0RXZlbnRMaXN0ZW5lcnMoY2FyZCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjYXJkKSB7XG4gIGlmIChjYXJkLmlzTGlrZWQgPT09IHRydWUpIHtcbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkTGlrZShjYXJkLl9pZClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY2FyZC5pc0xpa2VkID0gZmFsc2U7XG4gICAgICAgIGNhcmQuaGFuZGxlTGlrZUljb24oKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBhcGlcbiAgICAgIC5wdXRDYXJkTGlrZShjYXJkLl9pZClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY2FyZC5pc0xpa2VkID0gdHJ1ZTtcbiAgICAgICAgY2FyZC5oYW5kbGVMaWtlSWNvbigpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGZvcm1EYXRhKSB7XG4gIGNvbnN0YW50cy5lZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gIGFwaVxuICAgIC51cGRhdGVQcm9maWxlSW5mbyhmb3JtRGF0YS50aXRsZSwgZm9ybURhdGEuZGVzY3JpcHRpb24pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgdXNlSW5mby5zZXRVc2VySW5mbyhyZXMubmFtZSwgcmVzLmFib3V0KTtcbiAgICAgIGVkaXRQb3B1cC5jbG9zZSgpO1xuICAgICAgY29uc3RhbnRzLmVkaXRQcm9maWxlU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkRm9ybVN1Ym1pdChuYW1lLCBsaW5rKSB7XG4gIGNvbnN0YW50cy5hZGRDYXJkU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcbiAgYXBpXG4gICAgLmNyZWF0ZUNhcmRzKG5hbWUsIGxpbmspXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgbmV3Q2FyZExpc3QuYWRkSXRlbShyZXMpO1xuICAgICAgY2FyZFBvcHVwLmNsb3NlKCk7XG4gICAgICBjb25zdGFudHMuYWRkQ2FyZEZvcm0ucmVzZXQoKTtcbiAgICAgIGNvbnN0YW50cy5hZGRDYXJkU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KGlucHV0T2JqKSB7XG4gIGNvbnN0YW50cy5hdmF0YXJTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICBhcGlcbiAgICAudXBkYXRlQXZhdGFyKGlucHV0T2JqLmxpbmspXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgdXNlSW5mby5zZXRBdmF0YXIoaW5wdXRPYmoubGluayk7XG4gICAgICBhdmF0YXJQb3B1cC5jbG9zZSgpO1xuICAgICAgY29uc3RhbnRzLmF2YXRhclN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChjYXJkKSB7XG4gIGFwaVxuICAgIC5kZWxldGVDYXJkcyhjYXJkLl9pZClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBwb3B1cEFmZmlybS5jbG9zZSgpO1xuICAgICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLnNlcnZlciA9IGJhc2VVcmw7XG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnNlcnZlcn0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnNlcnZlcn0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHJlbmRlckNhcmRzKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbCh0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCkpO1xuICB9XG5cbiAgdXBkYXRlUHJvZmlsZUluZm8obmFtZSwgYWJvdXQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5zZXJ2ZXJ9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGFib3V0IH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICB1cGRhdGVBdmF0YXIoYXZhdGFyKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuc2VydmVyfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBjcmVhdGVDYXJkcyhkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuc2VydmVyfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IGRhdGEubmFtZSwgbGluazogZGF0YS5saW5rIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBkZWxldGVDYXJkcyhjYXJkSUQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5zZXJ2ZXJ9L2NhcmRzLyR7Y2FyZElEfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgcHV0Q2FyZExpa2UoY2FyZElEKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuc2VydmVyfS9jYXJkcy8ke2NhcmRJRH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmRMaWtlKGNhcmRJRCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnNlcnZlcn0vY2FyZHMvJHtjYXJkSUR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gICAgdGhpcy5hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLm5hbWUudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IHRoaXMuam9iLnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLmF2YXRhci5zcmMsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGpvYikge1xuICAgIHRoaXMubmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5qb2IudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cblxuICBzZXRBdmF0YXIobGluaykge1xuICAgIHRoaXMuYXZhdGFyLnNyYyA9IGxpbms7XG4gIH1cbn1cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKGNhcmREYXRhKSB7XG4gICAgY29uc3Qgdmlld1BpY01vZGFsSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgY29uc3Qgdmlld1BpY01vZGFsVGl0bGUgPVxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3BpYy10aXRsZVwiKTtcblxuICAgIHZpZXdQaWNNb2RhbEltYWdlLnNyYyA9IGNhcmREYXRhLl9saW5rO1xuICAgIHZpZXdQaWNNb2RhbEltYWdlLmFsdCA9IGNhcmREYXRhLl9uYW1lO1xuICAgIHZpZXdQaWNNb2RhbFRpdGxlLnRleHRDb250ZW50ID0gY2FyZERhdGEuX25hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVEZWxldGVDYXJkKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWZmaXJtQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2FyZDtcbiAgICB0aGlzLl9pZCA9IG51bGw7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycyhpZCkge1xuICAgIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIiNkZWxldGVDYXJkTW9kYWwgLm1vZGFsX19idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZChpZCkpO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBvcGVuKGlkKSB7XG4gICAgdGhpcy5faWQgPSBpZDtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cblxuICBjbG9zZShpZCkge1xuICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImZvcm1WYWxpZGF0aW9uQ29uZmlnIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJjYXJkVGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlZGl0QnV0dG9uIiwiZWRpdE1vZGFsIiwiYWRkQnV0dG9uIiwiYWRkTW9kYWwiLCJ2aWV3UGljTW9kYWwiLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlRWRpdEZvcm0iLCJlZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbiIsImFkZENhcmRGb3JtIiwiYWRkQ2FyZFN1Ym1pdEJ1dHRvbiIsImF2YXRhckJ1dHRvbiIsImF2YXRhciIsImdldEVsZW1lbnRCeUlkIiwiZWRpdEF2YXRhck1vZGFsIiwiZWRpdEF2YXRhckZvcm0iLCJhdmF0YXJTdWJtaXRCdXR0b24iLCJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRMaWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jYXJkSW1hZ2UiLCJfY2FyZEVsZW1lbnQiLCJoYW5kbGVMaWtlSWNvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9yZW5kZXJMaWtlcyIsImFkZCIsInJlbW92ZSIsImhhbmRsZURlbGV0ZUNhcmQiLCJnZXRWaWV3IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkVGl0bGUiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIlNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwicmV2ZXJzZSIsImZvckVhY2giLCJpdGVtIiwiY29uZmlnIiwiZm9ybUVsIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dEVscyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJvcHRpb25zIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsIl9kaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRFbHMiLCJzdWJtaXRCdXR0b24iLCJlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9ib3VuZEhhbmRsZUVzY0Nsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0cyIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0T2JqIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiYXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJzZXJ2ZXIiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJnZXRVc2VySW5mbyIsInJlbmRlckNhcmRzIiwiYWxsIiwidXBkYXRlUHJvZmlsZUluZm8iLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlQXZhdGFyIiwiY3JlYXRlQ2FyZHMiLCJkZWxldGVDYXJkcyIsImNhcmRJRCIsInB1dENhcmRMaWtlIiwiZGVsZXRlQ2FyZExpa2UiLCJhdXRob3JpemF0aW9uIiwidXNlSW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJqb2IiLCJzZXRVc2VySW5mbyIsInNldEF2YXRhciIsImVkaXRQb3B1cCIsImZvcm1EYXRhIiwiY29uc3RhbnRzIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibmV3UG9wdXBJbWFnZSIsImNhcmREYXRhIiwidmlld1BpY01vZGFsSW1hZ2UiLCJ2aWV3UGljTW9kYWxUaXRsZSIsImNhcmRQb3B1cCIsIm5ld0NhcmRMaXN0IiwiYXZhdGFyUG9wdXAiLCJwb3B1cEFmZmlybSIsIl9hZmZpcm1CdXR0b24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsImNhcmQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImNyZWF0ZUNhcmQiLCJhZGRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsImdldFVzZXIiXSwic291cmNlUm9vdCI6IiJ9