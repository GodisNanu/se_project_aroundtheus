!function(){"use strict";const t={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},e=document.querySelector("#editButton"),s=document.querySelector("#editModal"),n=document.querySelector("#addButton"),o=document.querySelector("#addModal"),i=document.querySelector("#viewPicModal"),r=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#name-input")),a=document.querySelector("#description-input"),l=s.querySelector(".modal__form"),c=o.querySelector(".modal__form");document.querySelector("#place-title"),document.querySelector("#image-link"),i.querySelector(".modal__image"),i.querySelector(".modal__pic-title");class u{constructor(t,e,s){this.name=t.name,this.link=t.link,this._cardSelector=e,this._handleImageClick=s}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._cardElement.remove()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this)}))}_handleLikeIcon(){this._cardLikeButton.classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__text"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardImage.src=this.link,this._cardImage.alt=this.name,this._cardTitle.textContent=this.name,this._setEventListeners(),this._cardElement}}var d=class{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=e,this._inputEls=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(t){const e=this._formElement.querySelector("#"+t.id+"-error");t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._formElement.querySelector("#"+t.id+"-error");t.classList.remove(this._inputErrorClass),e.textContent=" ",e.classList.remove(this._errorClass)}_checkInputValidity(t,e){t.validity.valid?this._hideInputError(t,e):this._showInputError(t,e)}_hasInvalidInput(){return!this._inputEls.every((t=>t.validity.valid))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(t,e,s){this._hasInvalidInput(t)?this._disableButton(e):this._enableButton(t,e,s)}_setEventListeners(t){this._toggleButtonState(t),this._inputEls.forEach((e=>{e.addEventListener("input",(s=>{this._checkInputValidity(e,t),this._toggleButtonState(this._inputEls,this._submitButton,t)}))}))}enableValidation(){this._formElement.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((t=>{this._hideInputError(t)})),this._disableButton(this._submitButton)}};class m{constructor(t){this._popupElement=document.querySelector(t),this._boundHandleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._boundHandleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._boundHandleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(t=>{t.target.classList.contains("modal_opened")&&this.close(),t.target.classList.contains("modal__close")&&this.close()}))}}class _ extends m{constructor(t,e){super(t),this._handleFormSubmit=e,this._inputs=this._popupElement.querySelectorAll(".modal__input")}_getInputValues(){const t={};return this._inputs.forEach((e=>{t[e.name]=e.value})),t}setInputValues(t){this._inputs.forEach((e=>{e.value=t[e.name]}))}setEventListeners(){this._popupElement.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const h=new class{constructor(t){let{nameSelector:e,jobSelector:s}=t;this.name=document.querySelector(e),this.job=document.querySelector(s)}getUserInfo(){return{name:this.name.textContent,job:this.job.textContent}}setUserInfo(t,e){this.name.textContent=t,this.job.textContent=e}}({nameSelector:".profile__title",jobSelector:".profile__description"}),p=new _("#editModal",(function(t){h.setUserInfo(t.title,t.description),p.close()}));p.setEventListeners();const E=new class extends m{constructor(t){super(t)}open(t){const e=this._popupElement.querySelector(".modal__image"),s=this._popupElement.querySelector(".modal__pic-title");e.src=t.link,e.alt=t.name,s.textContent=t.name,super.open()}}("#viewPicModal");E.setEventListeners();const v=new _("#addModal",(function(t,e){S.addItem(t,e),v.close(),c.reset()}));v.setEventListeners();const S=new class{constructor(t,e){let{items:s,renderer:n}=t;this._items=s,this._renderer=n,this._container=document.querySelector(e)}addItem=t=>{const e=this._renderer(t);this._container.prepend(e)};renderItems=()=>{this._items.forEach((t=>{this.addItem(t)}))}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:function(t){return new u(t,"#card-template",b).getView()}},".cards__list");function b(t,e){E.open(t,e)}document.addEventListener("DOMContentLoaded",(function(){const s=new d(t,c),o=new d(t,l);s.enableValidation(),o.enableValidation(),e.addEventListener("click",(()=>{const t=h.getUserInfo();r.value=t.name,a.value=t.job,p.open(),o.resetValidation()})),n.addEventListener("click",(()=>{v.open(),s.resetValidation()})),S.renderItems()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEJhLEVBQUFBLE1BQW1DYyxFQUFRaEgsS0FDM0NrRyxFQUFBQSxNQUEwQ2MsRUFBUTVCLElBQ2xERyxFQUFVeEIsT0FDVmdELEVBQWtCdkQsaUJBQWlCLElBR3JDMEMsRUFBQUEsaUJBQXFDLFNBQVMsS0FDNUNILEVBQVVoQyxPQUNWOEMsRUFBaUJyRCxpQkFBaUIsSUFHcEN3QyxFQUFZVyxhQUNkLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRCdXR0b25cIik7XG5leHBvcnQgY29uc3QgZWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0TW9kYWxcIik7XG5leHBvcnQgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRCdXR0b25cIik7XG5leHBvcnQgY29uc3QgYWRkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZE1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IHZpZXdQaWNNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdmlld1BpY01vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWUtaW5wdXRcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uLWlucHV0XCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gYWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxhY2UtdGl0bGVcIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZExpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbGlua1wiKTtcbmV4cG9ydCBjb25zdCB2aWV3UGljTW9kYWxJbWFnZSA9IHZpZXdQaWNNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCB2aWV3UGljTW9kYWxUaXRsZSA9XG4gIHZpZXdQaWNNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19waWMtdGl0bGVcIik7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMubGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190ZXh0XCIpO1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID1cbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMubGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5uYW1lO1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWw7XG4gICAgdGhpcy5faW5wdXRFbHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIjXCIgKyBpbnB1dEVsLmlkICsgXCItZXJyb3JcIlxuICAgICk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiI1wiICsgaW5wdXRFbC5pZCArIFwiLWVycm9yXCJcbiAgICApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCIgXCI7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCwgb3B0aW9ucykge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRFbHMsIHN1Ym1pdEJ1dHRvbiwgb3B0aW9ucykge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRFbHMpKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKHN1Ym1pdEJ1dHRvbik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2VuYWJsZUJ1dHRvbihpbnB1dEVscywgc3VibWl0QnV0dG9uLCBvcHRpb25zKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycyhvcHRpb25zKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUob3B0aW9ucyk7XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dEVscywgdGhpcy5fc3VibWl0QnV0dG9uLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9KTtcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKHRoaXMuX3N1Ym1pdEJ1dHRvbik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2JvdW5kSGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9ib3VuZEhhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2JvdW5kSGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dE9iaiA9IHt9O1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXRPYmpbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRPYmo7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IHVzZUluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxufSk7XG5cbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2VkaXRNb2RhbFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5lZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgbmV3UG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiN2aWV3UGljTW9kYWxcIik7XG5uZXdQb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2FkZE1vZGFsXCIsIGhhbmRsZUNhcmRGb3JtU3VibWl0KTtcbmNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBuZXdDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICB7IGl0ZW1zOiBjb25zdGFudHMuaW5pdGlhbENhcmRzLCByZW5kZXJlcjogY3JlYXRlQ2FyZCB9LFxuICBcIi5jYXJkc19fbGlzdFwiXG4pO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgICBjb25zdGFudHMuZm9ybVZhbGlkYXRpb25Db25maWcsXG4gICAgY29uc3RhbnRzLmFkZENhcmRGb3JtXG4gICk7XG5cbiAgY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgICBjb25zdGFudHMuZm9ybVZhbGlkYXRpb25Db25maWcsXG4gICAgY29uc3RhbnRzLnByb2ZpbGVFZGl0Rm9ybVxuICApO1xuXG4gIGFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBlZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBjb25zdGFudHMuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGdldFVzZXIgPSB1c2VJbmZvLmdldFVzZXJJbmZvKCk7XG4gICAgY29uc3RhbnRzLnByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBnZXRVc2VyLm5hbWU7XG4gICAgY29uc3RhbnRzLnByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gZ2V0VXNlci5qb2I7XG4gICAgZWRpdFBvcHVwLm9wZW4oKTtcbiAgICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgfSk7XG5cbiAgY29uc3RhbnRzLmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRQb3B1cC5vcGVuKCk7XG4gICAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgfSk7XG5cbiAgbmV3Q2FyZExpc3QucmVuZGVySXRlbXMoKTtcbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcbiAgbmV3UG9wdXBJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChmb3JtRGF0YSkge1xuICB1c2VJbmZvLnNldFVzZXJJbmZvKGZvcm1EYXRhLnRpdGxlLCBmb3JtRGF0YS5kZXNjcmlwdGlvbik7XG4gIGVkaXRQb3B1cC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkRm9ybVN1Ym1pdChuYW1lLCBsaW5rKSB7XG4gIG5ld0NhcmRMaXN0LmFkZEl0ZW0obmFtZSwgbGluayk7XG4gIGNhcmRQb3B1cC5jbG9zZSgpO1xuICBjb25zdGFudHMuYWRkQ2FyZEZvcm0ucmVzZXQoKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLm5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLm5hbWUudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IHRoaXMuam9iLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcbiAgICB0aGlzLm5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuam9iLnRleHRDb250ZW50ID0gam9iO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbihjYXJkRGF0YSkge1xuICAgIGNvbnN0IHZpZXdQaWNNb2RhbEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIGNvbnN0IHZpZXdQaWNNb2RhbFRpdGxlID1cbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19waWMtdGl0bGVcIik7XG5cbiAgICB2aWV3UGljTW9kYWxJbWFnZS5zcmMgPSBjYXJkRGF0YS5saW5rO1xuICAgIHZpZXdQaWNNb2RhbEltYWdlLmFsdCA9IGNhcmREYXRhLm5hbWU7XG4gICAgdmlld1BpY01vZGFsVGl0bGUudGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0gPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihkYXRhKTtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfTtcblxuICByZW5kZXJJdGVtcyA9ICgpID0+IHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLmFkZEl0ZW0oaXRlbSk7XG4gICAgfSk7XG4gIH07XG59XG4iXSwibmFtZXMiOlsiZm9ybVZhbGlkYXRpb25Db25maWciLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImVkaXRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlZGl0TW9kYWwiLCJhZGRCdXR0b24iLCJhZGRNb2RhbCIsInZpZXdQaWNNb2RhbCIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVFZGl0Rm9ybSIsImFkZENhcmRGb3JtIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJ0aGlzIiwibmFtZSIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZExpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiX2NhcmRJbWFnZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImdldFZpZXciLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiY29uZmlnIiwiZm9ybUVsIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dEVscyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJvcHRpb25zIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsIl9kaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRFbHMiLCJzdWJtaXRCdXR0b24iLCJmb3JFYWNoIiwiZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfYm91bmRIYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dHMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dE9iaiIsImlucHV0IiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsInVzZUluZm8iLCJfcmVmIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJqb2IiLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiZWRpdFBvcHVwIiwiZm9ybURhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwibmV3UG9wdXBJbWFnZSIsImNhcmREYXRhIiwidmlld1BpY01vZGFsSW1hZ2UiLCJ2aWV3UGljTW9kYWxUaXRsZSIsImNhcmRQb3B1cCIsIm5ld0NhcmRMaXN0IiwiYWRkSXRlbSIsImNvbnN0YW50cyIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJnZXRVc2VyIl0sInNvdXJjZVJvb3QiOiIifQ==