!function(){"use strict";const e={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=document.querySelector("#card-template"),s=document.querySelector("#editButton"),r=document.querySelector("#editModal"),n=document.querySelector("#addButton"),i=(t.querySelector("#cardDeleteButton"),document.querySelector("#addModal")),o=document.querySelector("#viewPicModal"),a=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#name-input")),l=document.querySelector("#description-input"),c=r.querySelector(".modal__form"),d=r.querySelector(".modal__button"),u=i.querySelector(".modal__form"),h=i.querySelector(".modal__button"),_=(document.querySelector("#place-title"),document.querySelector("#image-link"),o.querySelector(".modal__image"),o.querySelector(".modal__pic-title"),document.querySelector("#avatarButton")),m=document.getElementById("profile__avatar"),p=document.querySelector("#editAvatarModal"),v=p.querySelector(".modal__form"),E=p.querySelector(".modal__button");class S{constructor(e,t,s,r,n){this._name=e.name,this._link=e.link,this._id=e._id,this.isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=r,this._handleLikeClick=n}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleLikeClick(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this)})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteClick(this._id)}))}handleLikeIcon(){this._cardLikeButton.classList.toggle("card__like-button_active")}_renderLikes(){this.isLiked?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__text"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._renderLikes(),this._cardElement}}class L{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}addItem=e=>{const t=this._renderer(e);this._container.prepend(t)};renderItems=()=>{this._items.forEach((e=>{this.addItem(e)}))}}var b=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputEls=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector("#"+e.id+"-error");e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector("#"+e.id+"-error");e.classList.remove(this._inputErrorClass),t.textContent=" ",t.classList.remove(this._errorClass)}_checkInputValidity(e,t){e.validity.valid?this._hideInputError(e,t):this._showInputError(e,t)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(e,t,s){this._hasInvalidInput(e)?this._disableButton(t):this._enableButton(e,t,s)}_setEventListeners(e){this._toggleButtonState(e),this._inputEls.forEach((t=>{t.addEventListener("input",(s=>{this._checkInputValidity(t,e),this._toggleButtonState(this._inputEls,this._submitButton,e)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this._disableButton(this._submitButton)}};class f{constructor(e){this._popupElement=document.querySelector(e),this._boundHandleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._boundHandleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._boundHandleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal_opened")&&this.close(),e.target.classList.contains("modal__close")&&this.close()}))}}class k extends f{constructor(e,t){super(e),this._handleFormSubmit=t,this._inputs=this._popupElement.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const C=new class{constructor(e){let{baseUrl:t,headers:s}=e;this.server=t,this.headers=s}getInitialCards(){return fetch(`${this.server}/cards`,{headers:this.headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getUserInfo(){return fetch(`${this.server}/users/me`,{headers:this.headers}).then((e=>e.ok?e.json():Promise.reject(`Error:${e.status}`)))}renderCards(){return Promise.all(this.getUserInfo(),this.getInitialCards())}updateProfileInfo(e,t){return fetch(`${this.server}/users/me`,{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e,about:t})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}updateAvatar(e){return fetch(`${this.server}/users/me/avatar`,{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}createCards(e){return fetch(`${this.server}/cards`,{method:"POST",headers:this.headers,body:JSON.stringify({name:e.name,link:e.link})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}deleteCards(e){return fetch(`${this.server}/cards/${e}`,{method:"DELETE",headers:this.headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}putCardLike(e){return fetch(`${this.server}/cards/${e}/likes`,{method:"PUT",headers:this.headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}deleteCardLike(e){return fetch(`${this.server}/cards/${e}/likes`,{method:"DELETE",headers:this.headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"ae6b9f6f-b246-460f-9f1b-c55dcebd386d","Content-Type":"application/json"}}),y=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:r}=e;this.name=document.querySelector(t),this.job=document.querySelector(s),this.avatar=document.querySelector(r)}getUserInfo(){return{name:this.name.textContent,job:this.job.textContent,avatar:this.avatar.src}}setUserInfo(e,t){this.name.textContent=e,this.job.textContent=t}setAvatar(e){this.avatar.src=e}}({nameSelector:".profile__title",jobSelector:".profile__description",avatarSelector:".profile__avatar"}),q=new k("#editModal",(function(e){d.textContent="Saving...",C.updateProfileInfo(e.title,e.description).then((e=>{y.setUserInfo(e.name,e.about),q.close(),d.textContent="Save"})).catch((e=>{console.error(e)}))}));q.setEventListeners();const I=new class extends f{constructor(e){super(e)}open(e){const t=this._popupElement.querySelector(".modal__image"),s=this._popupElement.querySelector(".modal__pic-title");t.src=e.link,t.alt=e.name,s.textContent=e.name,super.open()}}("#viewPicModal");I.setEventListeners();const g=new k("#addModal",(function(e,t){h.textContent="Saving...",C.createCards(e,t).then((e=>{w.addItem(e),g.close(),u.reset(),h.textContent="Save"})).catch((e=>{console.error(e)}))}));g.setEventListeners();const B=new k("#editAvatarModal",(function(e){E.textContent="Saving...",C.updateAvatar(e.link).then((()=>{y.setAvatar(e.link),B.close(),E.textContent="Save"})).catch((e=>{console.error(e)}))}));B.setEventListeners();const j=new class extends f{constructor(e,t){super(e),this._affirmButton=this._popupElement.querySelector(".modal__button"),this._handleDeleteClick=t,this._id=null}setEventListeners(){document.querySelector("#deleteCardModal .modal__button").addEventListener("click",(()=>this._handleDeleteClick(this._id))),super.setEventListeners()}open(e){this._id=e,super.open()}close(e){this._id=e,super.close()}}("#deleteCardModal",(e=>(e=>{C.deleteCards(e).then((()=>{j.close(),$.handleDeleteCard()})).catch((e=>{console.error(e)}))})(e)));let w,$;function x(e){return $=new S(e,"#card-template",P,(e=>function(e){j.open(e)}(e)),(e=>function(e){!0===e.isLiked?C.deleteCardLike(e._id).then((t=>{e.isLiked=!1,e.handleLikeIcon()})).catch((e=>{console.error(e)})):C.putCardLike(e._id).then((t=>{e.isLiked=!0,e.handleLikeIcon()})).catch((e=>{console.error(e)}))}(e))),$.getView()}function P(e,t){I.open(e,t)}j.setEventListeners(),C.getInitialCards().then((e=>{w=new L({items:e,renderer:x},".cards__list"),w.renderItems()})).catch((e=>{console.error(e)})),C.getUserInfo().then((e=>{y.setUserInfo(e.name,e.about),y.setAvatar(e.avatar)})).catch((e=>{console.error(e)})),document.addEventListener("DOMContentLoaded",(function(){const t=new b(e,u),r=new b(e,c),i=new b(e,v);t.enableValidation(),r.enableValidation(),i.enableValidation(),s.addEventListener("click",(()=>{const e=y.getUserInfo();a.value=e.name,l.value=e.job,q.open(),r.resetValidation()})),n.addEventListener("click",(()=>{g.open(),t.resetValidation()})),m.addEventListener("click",(()=>{B.open(),t.resetValidation()})),m.addEventListener("mousemove",(()=>{_.classList.replace("profile__avatar-button_disabled","profile__avatar-button")}))})),m.addEventListener("mouseout",(()=>{_.classList.replace("profile__avatar-button","profile__avatar-button_disabled")}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R3RCMUssU0FBU3VDLGlCQUFpQixvQkFBb0IsV0FDNUMsTUFBTWlKLEVBQW1CLElBQUlDLEVBQzNCbkIsRUFDQUEsR0FHSW9CLEVBQW9CLElBQUlELEVBQzVCbkIsRUFDQUEsR0FHSXFCLEVBQXNCLElBQUlGLEVBQzlCbkIsRUFDQUEsR0FHRmtCLEVBQWlCbEYsbUJBQ2pCb0YsRUFBa0JwRixtQkFDbEJxRixFQUFvQnJGLG1CQU1wQmdFLEVBQUFBLGlCQUFzQyxTQUFTLEtBQzdDLE1BQU1zQixFQUFVL0IsRUFBUWhCLGNBQ3hCeUIsRUFBQUEsTUFBbUNzQixFQUFRaEssS0FDM0MwSSxFQUFBQSxNQUEwQ3NCLEVBQVEzQixJQUNsREcsRUFBVXJELE9BQ1YyRSxFQUFrQmxGLGlCQUFpQixJQUdyQzhELEVBQUFBLGlCQUFxQyxTQUFTLEtBQzVDVyxFQUFVbEUsT0FDVnlFLEVBQWlCaEYsaUJBQWlCLElBR3BDOEQsRUFBQUEsaUJBQWtDLFNBQVMsS0FDekNhLEVBQVlwRSxPQUNaeUUsRUFBaUJoRixpQkFBaUIsSUFHcEM4RCxFQUFBQSxpQkFBa0MsYUFBYSxLQUM3Q0EsRUFBQUEsVUFBQUEsUUFDRSxrQ0FDQSx5QkFDRCxHQUVMLElBRUFBLEVBQUFBLGlCQUFrQyxZQUFZLEtBQzVDQSxFQUFBQSxVQUFBQSxRQUNFLHlCQUNBLGtDQUNELEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdEJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRNb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZEJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBkZWxldGVCdXR0b24gPSBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcihcIiNjYXJkRGVsZXRlQnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRNb2RhbFwiKTtcbmV4cG9ydCBjb25zdCB2aWV3UGljTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ZpZXdQaWNNb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lLWlucHV0XCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvbi1pbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbiA9XG4gIGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm0gPSBhZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRTdWJtaXRCdXR0b24gPSBhZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZFRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYWNlLXRpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLWxpbmtcIik7XG5leHBvcnQgY29uc3Qgdmlld1BpY01vZGFsSW1hZ2UgPSB2aWV3UGljTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5leHBvcnQgY29uc3Qgdmlld1BpY01vZGFsVGl0bGUgPVxuICB2aWV3UGljTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcGljLXRpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyQnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZV9fYXZhdGFyXCIpO1xuZXhwb3J0IGNvbnN0IGVkaXRBdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdEF2YXRhck1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IGVkaXRBdmF0YXJGb3JtID0gZWRpdEF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgYXZhdGFyU3VibWl0QnV0dG9uID1cbiAgZWRpdEF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxuICAgIGhhbmRsZUxpa2VDbGlja1xuICApIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLmlzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuX2lkKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9yZW5kZXJMaWtlcygpIHtcbiAgICBpZiAodGhpcy5pc0xpa2VkKSB7XG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIik7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPVxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICBhZGRJdGVtID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoZGF0YSk7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH07XG5cbiAgcmVuZGVySXRlbXMgPSAoKSA9PiB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5hZGRJdGVtKGl0ZW0pO1xuICAgIH0pO1xuICB9O1xufVxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsKSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbDtcbiAgICB0aGlzLl9pbnB1dEVscyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIiNcIiArIGlucHV0RWwuaWQgKyBcIi1lcnJvclwiXG4gICAgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIjXCIgKyBpbnB1dEVsLmlkICsgXCItZXJyb3JcIlxuICAgICk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIiBcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsLCBvcHRpb25zKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVscywgc3VibWl0QnV0dG9uLCBvcHRpb25zKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dEVscykpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oc3VibWl0QnV0dG9uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZW5hYmxlQnV0dG9uKGlucHV0RWxzLCBzdWJtaXRCdXR0b24sIG9wdGlvbnMpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKG9wdGlvbnMpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShvcHRpb25zKTtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0RWxzLCB0aGlzLl9zdWJtaXRCdXR0b24sIG9wdGlvbnMpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0pO1xuICAgIHRoaXMuX2Rpc2FibGVCdXR0b24odGhpcy5fc3VibWl0QnV0dG9uKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fYm91bmRIYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2JvdW5kSGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fYm91bmRIYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0T2JqID0ge307XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dE9ialtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dE9iajtcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzXCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImFlNmI5ZjZmLWIyNDYtNDYwZi05ZjFiLWM1NWRjZWJkMzg2ZFwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmNvbnN0IHVzZUluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxuICBhdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9fYXZhdGFyXCIsXG59KTtcblxuY29uc3QgZWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjZWRpdE1vZGFsXCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBuZXdQb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ZpZXdQaWNNb2RhbFwiKTtcbm5ld1BvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgY2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYWRkTW9kYWxcIiwgaGFuZGxlQ2FyZEZvcm1TdWJtaXQpO1xuY2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2VkaXRBdmF0YXJNb2RhbFwiLFxuICBoYW5kbGVBdmF0YXJGb3JtU3VibWl0XG4pO1xuYXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgaGFuZGxlRGVsZXRlQ2FyZCA9IChpZCkgPT4ge1xuICBhcGlcbiAgICAuZGVsZXRlQ2FyZHMoaWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgcG9wdXBBZmZpcm0uY2xvc2UoKTtcbiAgICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IHBvcHVwQWZmaXJtID0gbmV3IFBvcHVwV2l0aENvbmZpcm0oXCIjZGVsZXRlQ2FyZE1vZGFsXCIsIChpZCkgPT5cbiAgaGFuZGxlRGVsZXRlQ2FyZChpZClcbik7XG5wb3B1cEFmZmlybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5sZXQgbmV3Q2FyZExpc3Q7XG5sZXQgY2FyZDtcblxuYXBpXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxuICAudGhlbigocmVzKSA9PiB7XG4gICAgbmV3Q2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAgICAgIHsgaXRlbXM6IHJlcywgcmVuZGVyZXI6IGNyZWF0ZUNhcmQgfSxcbiAgICAgIFwiLmNhcmRzX19saXN0XCJcbiAgICApO1xuICAgIG5ld0NhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxuYXBpXG4gIC5nZXRVc2VySW5mbygpXG4gIC50aGVuKChyZXMpID0+IHtcbiAgICB1c2VJbmZvLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQpO1xuICAgIHVzZUluZm8uc2V0QXZhdGFyKHJlcy5hdmF0YXIpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfSk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIGNvbnN0YW50cy5mb3JtVmFsaWRhdGlvbkNvbmZpZyxcbiAgICBjb25zdGFudHMuYWRkQ2FyZEZvcm1cbiAgKTtcblxuICBjb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIGNvbnN0YW50cy5mb3JtVmFsaWRhdGlvbkNvbmZpZyxcbiAgICBjb25zdGFudHMucHJvZmlsZUVkaXRGb3JtXG4gICk7XG5cbiAgY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIGNvbnN0YW50cy5mb3JtVmFsaWRhdGlvbkNvbmZpZyxcbiAgICBjb25zdGFudHMuZWRpdEF2YXRhckZvcm1cbiAgKTtcblxuICBhZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBhdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBMaXN0ZW5lcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIGNvbnN0YW50cy5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc3QgZ2V0VXNlciA9IHVzZUluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBjb25zdGFudHMucHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IGdldFVzZXIubmFtZTtcbiAgICBjb25zdGFudHMucHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBnZXRVc2VyLmpvYjtcbiAgICBlZGl0UG9wdXAub3BlbigpO1xuICAgIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICB9KTtcblxuICBjb25zdGFudHMuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZFBvcHVwLm9wZW4oKTtcbiAgICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICB9KTtcblxuICBjb25zdGFudHMuYXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgYXZhdGFyUG9wdXAub3BlbigpO1xuICAgIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIH0pO1xuXG4gIGNvbnN0YW50cy5hdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCAoKSA9PiB7XG4gICAgY29uc3RhbnRzLmF2YXRhckJ1dHRvbi5jbGFzc0xpc3QucmVwbGFjZShcbiAgICAgIFwicHJvZmlsZV9fYXZhdGFyLWJ1dHRvbl9kaXNhYmxlZFwiLFxuICAgICAgXCJwcm9maWxlX19hdmF0YXItYnV0dG9uXCJcbiAgICApO1xuICB9KTtcbn0pO1xuXG5jb25zdGFudHMuYXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gIGNvbnN0YW50cy5hdmF0YXJCdXR0b24uY2xhc3NMaXN0LnJlcGxhY2UoXG4gICAgXCJwcm9maWxlX19hdmF0YXItYnV0dG9uXCIsXG4gICAgXCJwcm9maWxlX19hdmF0YXItYnV0dG9uX2Rpc2FibGVkXCJcbiAgKTtcbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNhcmQgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICAoaWQpID0+IGhhbmRsZURlbGV0ZUNsaWNrKGlkKSxcbiAgICAoaWQpID0+IGhhbmRsZUxpa2VDbGljayhpZClcbiAgKTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcbiAgbmV3UG9wdXBJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljayhpZCkge1xuICBwb3B1cEFmZmlybS5vcGVuKGlkKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmQpIHtcbiAgaWYgKGNhcmQuaXNMaWtlZCA9PT0gdHJ1ZSkge1xuICAgIGFwaVxuICAgICAgLmRlbGV0ZUNhcmRMaWtlKGNhcmQuX2lkKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjYXJkLmlzTGlrZWQgPSBmYWxzZTtcbiAgICAgICAgY2FyZC5oYW5kbGVMaWtlSWNvbigpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGFwaVxuICAgICAgLnB1dENhcmRMaWtlKGNhcmQuX2lkKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjYXJkLmlzTGlrZWQgPSB0cnVlO1xuICAgICAgICBjYXJkLmhhbmRsZUxpa2VJY29uKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZm9ybURhdGEpIHtcbiAgY29uc3RhbnRzLmVkaXRQcm9maWxlU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcbiAgYXBpXG4gICAgLnVwZGF0ZVByb2ZpbGVJbmZvKGZvcm1EYXRhLnRpdGxlLCBmb3JtRGF0YS5kZXNjcmlwdGlvbilcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICB1c2VJbmZvLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQpO1xuICAgICAgZWRpdFBvcHVwLmNsb3NlKCk7XG4gICAgICBjb25zdGFudHMuZWRpdFByb2ZpbGVTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KG5hbWUsIGxpbmspIHtcbiAgY29uc3RhbnRzLmFkZENhcmRTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICBhcGlcbiAgICAuY3JlYXRlQ2FyZHMobmFtZSwgbGluaylcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBuZXdDYXJkTGlzdC5hZGRJdGVtKHJlcyk7XG4gICAgICBjYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgIGNvbnN0YW50cy5hZGRDYXJkRm9ybS5yZXNldCgpO1xuICAgICAgY29uc3RhbnRzLmFkZENhcmRTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoaW5wdXRPYmopIHtcbiAgY29uc3RhbnRzLmF2YXRhclN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gIGFwaVxuICAgIC51cGRhdGVBdmF0YXIoaW5wdXRPYmoubGluaylcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICB1c2VJbmZvLnNldEF2YXRhcihpbnB1dE9iai5saW5rKTtcbiAgICAgIGF2YXRhclBvcHVwLmNsb3NlKCk7XG4gICAgICBjb25zdGFudHMuYXZhdGFyU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLnNlcnZlciA9IGJhc2VVcmw7XG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5zZXJ2ZXJ9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnNlcnZlcn0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjoke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXJDYXJkcygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwodGhpcy5nZXRVc2VySW5mbygpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpKTtcbiAgfVxuXG4gIHVwZGF0ZVByb2ZpbGVJbmZvKG5hbWUsIGFib3V0KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuc2VydmVyfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBhYm91dCB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVBdmF0YXIoYXZhdGFyKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuc2VydmVyfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZUNhcmRzKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5zZXJ2ZXJ9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogZGF0YS5uYW1lLCBsaW5rOiBkYXRhLmxpbmsgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZHMoY2FyZElEKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuc2VydmVyfS9jYXJkcy8ke2NhcmRJRH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgcHV0Q2FyZExpa2UoY2FyZElEKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuc2VydmVyfS9jYXJkcy8ke2NhcmRJRH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZExpa2UoY2FyZElEKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuc2VydmVyfS9jYXJkcy8ke2NhcmRJRH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMubmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLmpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgIHRoaXMuYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5uYW1lLnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLmpvYi50ZXh0Q29udGVudCxcbiAgICAgIGF2YXRhcjogdGhpcy5hdmF0YXIuc3JjLFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcbiAgICB0aGlzLm5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuam9iLnRleHRDb250ZW50ID0gam9iO1xuICB9XG5cbiAgc2V0QXZhdGFyKGxpbmspIHtcbiAgICB0aGlzLmF2YXRhci5zcmMgPSBsaW5rO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbihjYXJkRGF0YSkge1xuICAgIGNvbnN0IHZpZXdQaWNNb2RhbEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIGNvbnN0IHZpZXdQaWNNb2RhbFRpdGxlID1cbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19waWMtdGl0bGVcIik7XG5cbiAgICB2aWV3UGljTW9kYWxJbWFnZS5zcmMgPSBjYXJkRGF0YS5saW5rO1xuICAgIHZpZXdQaWNNb2RhbEltYWdlLmFsdCA9IGNhcmREYXRhLm5hbWU7XG4gICAgdmlld1BpY01vZGFsVGl0bGUudGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cFwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRGVsZXRlQ2xpY2spIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9hZmZpcm1CdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faWQgPSBudWxsO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZUNhcmRNb2RhbCAubW9kYWxfX2J1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzLl9pZCkpO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBvcGVuKGlkKSB7XG4gICAgdGhpcy5faWQgPSBpZDtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cblxuICBjbG9zZShpZCkge1xuICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImZvcm1WYWxpZGF0aW9uQ29uZmlnIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJjYXJkVGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlZGl0QnV0dG9uIiwiZWRpdE1vZGFsIiwiYWRkQnV0dG9uIiwiYWRkTW9kYWwiLCJ2aWV3UGljTW9kYWwiLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlRWRpdEZvcm0iLCJlZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbiIsImFkZENhcmRGb3JtIiwiYWRkQ2FyZFN1Ym1pdEJ1dHRvbiIsImF2YXRhckJ1dHRvbiIsImF2YXRhciIsImdldEVsZW1lbnRCeUlkIiwiZWRpdEF2YXRhck1vZGFsIiwiZWRpdEF2YXRhckZvcm0iLCJhdmF0YXJTdWJtaXRCdXR0b24iLCJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRMaWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jYXJkSW1hZ2UiLCJfY2FyZEVsZW1lbnQiLCJoYW5kbGVMaWtlSWNvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9yZW5kZXJMaWtlcyIsImFkZCIsInJlbW92ZSIsImhhbmRsZURlbGV0ZUNhcmQiLCJnZXRWaWV3IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkVGl0bGUiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIlNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiZm9yRWFjaCIsIml0ZW0iLCJjb25maWciLCJmb3JtRWwiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0RWxzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIm9wdGlvbnMiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsImV2ZXJ5IiwiX2Rpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dEVscyIsInN1Ym1pdEJ1dHRvbiIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2JvdW5kSGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRzIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRPYmoiLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsInNlcnZlciIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mbyIsInJlbmRlckNhcmRzIiwiYWxsIiwidXBkYXRlUHJvZmlsZUluZm8iLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlQXZhdGFyIiwiY3JlYXRlQ2FyZHMiLCJkZWxldGVDYXJkcyIsImNhcmRJRCIsInB1dENhcmRMaWtlIiwiZGVsZXRlQ2FyZExpa2UiLCJhdXRob3JpemF0aW9uIiwidXNlSW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJqb2IiLCJzZXRVc2VySW5mbyIsInNldEF2YXRhciIsImVkaXRQb3B1cCIsImZvcm1EYXRhIiwiY29uc3RhbnRzIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibmV3UG9wdXBJbWFnZSIsImNhcmREYXRhIiwidmlld1BpY01vZGFsSW1hZ2UiLCJ2aWV3UGljTW9kYWxUaXRsZSIsImNhcmRQb3B1cCIsIm5ld0NhcmRMaXN0IiwiYXZhdGFyUG9wdXAiLCJwb3B1cEFmZmlybSIsIl9hZmZpcm1CdXR0b24iLCJjYXJkIiwiY3JlYXRlQ2FyZCIsImFkZEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwiZ2V0VXNlciJdLCJzb3VyY2VSb290IjoiIn0=